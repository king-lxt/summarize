### 1、React Fiber介绍

```
原因：
计算机通常追踪程序执行的方式是使用调用堆栈。执行函数时，不断的把堆栈帧加入到堆栈中，一个堆栈帧就表示一个要执行的工作。
在处理UI时，如果执行太多的工作，就可能导致动画丢帧。这就导致页面UI 渲染卡顿

新版本的浏览器实现了有助于解决这个问题的API： requestIdleCallback 和 requestAnimationFrame 
requestIdleCallback 调度在空闲期间调用的低优先级函数
requestAnimationFrame调度在下一个动画帧上调用的高优先级函数。

问题是，为了使用这些API，就需要一种方法将渲染工作分解为增量单元。如果仅依赖于调用堆栈，它将继续工作直到堆栈为空，无法中断。
为了实现增量渲染的调度，就必须重新实现这个堆栈帧，以便可以将堆栈帧保留在内存中，然后按照自己的调度算法执行他们。同时由于这些堆栈栈是我们手动处理的，我们还可以加入并发或者错误边界等功能。

因此【Fiber】就是重新实现的堆栈帧，本质上Fiber也可以理解为是一个虚拟的堆栈帧，将可中断的任务拆分成多个子任务，通过按照优先级来自由调度子任务，分段更新，从而将之前的同步渲染改为异步渲染。
react内部有自己的优先级判断逻辑，比如动画，用户交互等任务优先级就明显要高。
```

